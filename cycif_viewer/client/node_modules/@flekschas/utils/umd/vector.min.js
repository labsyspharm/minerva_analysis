!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n=n||self).utils=n.utils||{})}(this,(function(n){"use strict";var t=function(n){return n},r=function(n){return!!(n&&n.constructor&&n.call&&n.apply)},e=function(n){return Math.sqrt(n.reduce((function(n,t){return n+Math.pow(t,2)}),0))},u=function(n){return n.reduce((function(n,t){return t>n?t:n}),-1/0)},c=u,i=function(n){return n[Math.floor(n.length/2)]},o=i,a=function(n){return n.reduce((function(n,t){return t<n?t:n}),1/0)},f=a,l=function(n){return n.reduce((function(n,t){return t?n+t:n}),0)},s=l;n.aggregate=function(n,e,u){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=c.getter,o=void 0===i?t:i,a=r(e),f=a?[e]:e,l=a?[u]:u,s=n.reduce((function(n,t){return f.map((function(r,e){return r(n[e],o(t))}))}),void 0===l?Array(f.length).fill(0):l);return a?s[0]:s},n.diff=function(n,t){return n.map((function(n,r){return n-t[r]}))},n.l1Dist=function(n,t){return n.length===t.length?n.reduce((function(n,r,e){return n+Math.abs(r-t[e])}),0):void 0},n.l1DistByDim=function(n){var t=Array(n).fill().map((function(n,t){return"s += Math.abs(v[".concat(t,"] - w[").concat(t,"]);")})).join(" ");return new Function("v","w","let s = 0; ".concat(t," return s;"))},n.l2Dist=function(n,t){return n.length===t.length?Math.sqrt(n.reduce((function(n,r,e){return n+Math.pow(r-t[e],2)}),0)):void 0},n.l2DistByDim=function(n){var t=Array(n).fill().map((function(n,t){return"s += Math.pow(v[".concat(t,"] - w[").concat(t,"], 2);")})).join(" ");return new Function("v","w","let s = 0; ".concat(t," return Math.sqrt(s);"))},n.l2Norm=e,n.lDist=function(n,t){if(Number.isNaN(+t))return function(t,r){return t.length===r.length?Math.pow(t.reduce((function(t,e,u){return t+Math.pow(Math.abs(e-r[u]),n)}),0),1/n):void 0};var r=Array(t).fill().map((function(n,t){return"s += Math.abs(v[".concat(t,"] - w[").concat(t,"]) ** l;")})).join(" ");return new Function("v","w","const l = ".concat(n,"; let s = 0; ").concat(r," return s ** (1 / l);"))},n.max=u,n.maxNan=c,n.maxVector=function(n){switch(n.length){case 0:return[];case 1:return n[0];default:return n.reduce((function(n,t){return t.map((function(t,r){return n[r]>t?n[r]:t}))}),new Array(n[0].length).fill(-1/0))}},n.mean=function(n){return l(n)/n.length},n.meanNan=function(n){var t=0;return n.reduce((function(n,r){return r||0===r?++t&&n+r:n}),0)/t},n.meanVector=function(n){switch(n.length){case 0:return[];case 1:return n[0];default:return n.reduce((function(t,r){return r.map((function(r,e){return t[e]+r/n.length}))}),new Array(n[0].length).fill(0))}},n.median=i,n.medianVector=o,n.min=a,n.minNan=f,n.minVector=function(n){switch(n.length){case 0:return[];case 1:return n[0];default:return n.reduce((function(n,t){return t.map((function(t,r){return n[r]<t?n[r]:t}))}),new Array(n[0].length).fill(1/0))}},n.mod=function(n,t){return(n%t+n)%t},n.normalize=function(n){var t=e(n);return n.map((function(n){return n/t}))},n.range=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Array(Math.ceil((t-n)/r)).fill().map((function(t,e){return n+e*r}))},n.sum=l,n.sumNan=s,n.sumVector=function(n){switch(n.length){case 0:return[];case 1:return n[0];default:return n.reduce((function(n,t){return t.map((function(t,r){return n[r]+t}))}),new Array(n[0].length).fill(0))}},Object.defineProperty(n,"__esModule",{value:!0})}));
